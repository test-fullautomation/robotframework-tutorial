<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<title>tutorial-03: working with dictionaries</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 8954 2022-01-20 10:10:25Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See https://docutils.sourceforge.io/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="tutorial-03-working-with-dictionaries">
<h1 class="title">tutorial-03: working with dictionaries</h1>

<!-- Copyright 2020-2022 Robert Bosch GmbH

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. -->
<p><strong>Data sets</strong></p>
<p>Before we go to the tests of this tutorial we take a look at the variables used here:</p>
<p>Within</p>
<pre class="code literal-block">
./libs/testimport.resource
</pre>
<p>the scalars of tutorial-01 are put together within a dictionary</p>
<pre class="code literal-block">
&amp;{var_dict}    key_01=${var_01}
...            key_02=${var_02}
           ...
...            key_18=${var_18}
</pre>
<p>The keyword library</p>
<pre class="code literal-block">
./libs/testlibrary.py
</pre>
<p>contains the keyword <tt class="docutils literal">log_dict</tt> that logs the value and the type of all keys of a given dictionary (<tt class="docutils literal">param</tt>):</p>
<pre class="code literal-block">
for key in param:
   key_value = str(param[key])
   key_type  = str(type(param[key]))
   BuiltIn().log(f&quot;+ key: '{key}' / value: '{key_value}' / type: {key_type}&quot;, &quot;INFO&quot;, console=True)
</pre>
<p><strong>Robot file</strong></p>
<p><tt class="docutils literal"><span class="pre">tutorial-03.robot</span></tt> demonstrates how to work with dictionaries.</p>
<p><strong>Execution</strong></p>
<pre class="code literal-block">
&quot;%RobotPythonPath%/python.exe&quot; -m robot -d ./logfiles -o tutorial-03.xml -l tutorial-03_log.html -r tutorial-03_report.html -b tutorial-03.log ./tutorial-03.robot
</pre>
<div class="section" id="test-case-03-01">
<h1>Test case 03_01</h1>
<p>In test case <tt class="docutils literal">03_01</tt> all dictionary keys are logged with <tt class="docutils literal">log_dict</tt>:</p>
<pre class="code literal-block">
log_dict    ${var_dict}
</pre>
<p><strong>Outcome</strong></p>
<p>Values and data types are the same like in tutorial-01 and tutorial-02.</p>
</div>
<div class="section" id="test-case-03-02">
<h1>Test case 03_02</h1>
<p>In test case <tt class="docutils literal">03_02</tt> single keys of the dictionary are accessed in two ways:</p>
<ol class="arabic simple">
<li>Key name is hard coded</li>
<li>Key name is variable of type string</li>
</ol>
<pre class="code literal-block">
log_scalar    ${var_dict}[key_06]
log_scalar    ${var_dict}[${key_as_string}]
</pre>
<p>The following key variable is used:</p>
<pre class="code literal-block">
${key_as_string}    key_06
</pre>
<p><strong>Outcome</strong></p>
<p>In both cases the result is the same (<tt class="docutils literal">123</tt>). The Robot Framework documentation tells that when using this syntax: <tt class="docutils literal">${var}</tt>, this expression
is replaced by the value of the variable (<tt class="docutils literal">var</tt>) <em>as-is</em>.</p>
<p>Therefore <tt class="docutils literal">${key_as_string}</tt> is replaced by <tt class="docutils literal">key_06</tt>. The result is that in both cases <tt class="docutils literal"><span class="pre">${var_dict}[key_06]</span></tt> is the expression to be evaluated.</p>
</div>
<div class="section" id="test-case-03-03">
<h1>Test case 03_03</h1>
<p>In test case <tt class="docutils literal">03_03</tt> we work with nested dictionaries defined within the json configuration file of this tutorial.</p>
<pre class="code literal-block">
./config/tutorialconfig.json
</pre>
<p>But before we start, some internals needs to be mentioned: The json format and the robot code format are two different worlds.
Both have their own formats. Compared to the Robot Framework core, the RobotFramework AIO contains a component called <tt class="docutils literal">JsonPreprocessor</tt>.
With the help of this component the RobotFramework AIO is able to access the content of json files independend from format differences.
The <tt class="docutils literal">JsonPreprocessor</tt> is able to convert the formats, and when the json content is passed to the robot world, then the content is adapted.</p>
<p>But behind the curtain still json parsing mechanisms are used to get the content and therefore it is not possible to align already
the structure of the json files itself to the requirements of the robot world. The differences are still present
(<em>and explained in this tutorial</em>).</p>
<p><em>Therefore be aware of the differences and be careful when you copy&amp;paste content between json and robot!</em></p>
<p>Another aspect is the name of the data type of a dictionary. In this tutorial we mostly use for logging own keywords like
<tt class="docutils literal">log_scalar</tt>, <tt class="docutils literal">log_list</tt> and <tt class="docutils literal">log_dict</tt>. With the purpose to check also the data type of the given parameter.</p>
<p>In case of a parameter is an integer value, the name of the data type is: <tt class="docutils literal">int</tt>. That's easy. The name of the dictionary data type
is: <tt class="docutils literal">dict</tt> (in pure Python). Also in pure Python an extension of the <tt class="docutils literal">dict</tt> data type is available: called <tt class="docutils literal">dotdict</tt>. This is a dictionary
with reduced syntax - and therefore easier to use. Examples will be shown below. Important here is: Additionally to what Python provides already,
the Robot Framework implements his own version of a dotdict. And when you use the Python <tt class="docutils literal">type()</tt> function to get the data type of
a dictionary variable, this will be the answer:</p>
<pre class="code literal-block">
RobotFramework_Testsuites.Config.CConfig.dotdict
</pre>
<p>However, in this tutorial we continue with simply calling it <em>dictionary</em>!</p>
<p><strong>json file content</strong></p>
<p>Now we take a look at the content of the json file. The global params section defines the dictionary <tt class="docutils literal">dict_val</tt>
step by step in the following way:</p>
<pre class="code literal-block">
&quot;dict_val&quot; : {},
&quot;${params}['global']['dict_val']['key_1']&quot; : {},
&quot;${params}['global']['dict_val']['key_1']['subkey_11']&quot; : {},
&quot;${params}['global']['dict_val']['key_1']['subkey_11']['subsubkey_111']&quot; : &quot;${params}['global']['string_val']&quot;,
&quot;${params}['global']['dict_val']['key_1']['subkey_11']['subsubkey_112']&quot; : &quot;${params}['global']['int_val']&quot;,
&quot;${params}['global']['dict_val']['key_1']['subkey_11']['subsubkey_113']&quot; : &quot;${params}['global']['float_val']&quot;,
&quot;${params}['global']['dict_val']['key_2']&quot; : {},
&quot;${params}['global']['dict_val']['key_2']['subkey_21']&quot; : {},
&quot;${params}['global']['dict_val']['key_2']['subkey_21']['subsubkey_211']&quot; : &quot;${params}['global']['bool_val_1']&quot;,
&quot;${params}['global']['dict_val']['key_2']['subkey_21']['subsubkey_212']&quot; : &quot;${params}['global']['bool_val_2']&quot;,
&quot;${params}['global']['dict_val']['key_2']['subkey_21']['subsubkey_213']&quot; : &quot;${params}['global']['null_val']&quot;
</pre>
<p>This is a nested dictionary - the values of keys are also dictionaries. Every dictionary (at each level)
needs to be initialized by <tt class="docutils literal">{}</tt> before keys can be added.</p>
<p>The dictionary <tt class="docutils literal">dict_val</tt> contains two keys (<tt class="docutils literal">key_1</tt> and <tt class="docutils literal">key_2</tt>). Every key contain one single key
at the level below (<tt class="docutils literal">subkey_11</tt> and <tt class="docutils literal">subkey_21</tt>). The lowest level consists of the keys <tt class="docutils literal">subsubkey_111</tt>
to <tt class="docutils literal">subsubkey_213</tt>. To every key at this level a scalar is assigned - and we use here the scalars (of the configuration file),
that already have been used in tutorial-01:</p>
<pre class="code literal-block">
&quot;string_val&quot; : &quot;test string&quot;,
&quot;int_val&quot; : 123,
&quot;float_val&quot; : 4.56,
&quot;bool_val_1&quot; : True,
&quot;bool_val_2&quot; : true,
&quot;bool_val_3&quot; : False,
&quot;bool_val_4&quot; : false,
&quot;none_val&quot; : None,
&quot;null_val&quot; : null,
</pre>
<p>Within <tt class="docutils literal">tutorialconfig.json</tt> all parameter definitions are put into the following code:</p>
<pre class="code literal-block">
&quot;params&quot; : {
            &quot;global&quot;: {
                       (definitions of global params)
                      }
           }
</pre>
<p>Meaning: The scope of all of these user defined parameters is: <tt class="docutils literal">params:global</tt>. In case you want to use
inside a json configuration file a parameter that is defined within this file also, you have to set this scope.</p>
<p>This is a valid assignment (containing the scope <tt class="docutils literal"><span class="pre">${params}['global']</span></tt>):</p>
<pre class="code literal-block">
&quot;${params}['global']['dict_val']['key_1']['subkey_11']['subsubkey_111']&quot; : &quot;${params}['global']['string_val']&quot;,
</pre>
<p>For comparison: These are invalid assignments (where the scope is missing at any position):</p>
<pre class="code literal-block">
&quot;${params}['global']['dict_val']['key_1']['subkey_11']['subsubkey_111']&quot; : &quot;${string_val}&quot;,
&quot;${dict_val}['key_1']['subkey_11']['subsubkey_111']&quot; : &quot;${params}['global']['string_val']&quot;,
&quot;${dict_val}['key_1']['subkey_11']['subsubkey_111']&quot; : &quot;${string_val}&quot;,
</pre>
<p>And very important: In robot code the scope <tt class="docutils literal">params:global</tt> is the default. In your tests you have to refer to <tt class="docutils literal">subsubkey_111</tt>
in the following way:</p>
<pre class="code literal-block">
${dict_val}[key_1][subkey_11][subsubkey_111]
</pre>
<p><strong>Test case content</strong></p>
<p>Test case <tt class="docutils literal">03_03</tt> starts with the log of the entire user defined dictionary <tt class="docutils literal">dict_val</tt>.</p>
<pre class="code literal-block">
log_dict    ${dict_val}
</pre>
<p>With the help of the already known keyword <tt class="docutils literal">log_scalar</tt> we take a look at every low level key manually:</p>
<pre class="code literal-block">
log_scalar    ${dict_val}[key_1][subkey_11][subsubkey_111]
log_scalar    ${dict_val}[key_1][subkey_11][subsubkey_112]
log_scalar    ${dict_val}[key_1][subkey_11][subsubkey_113]
log_scalar    ${dict_val}[key_2][subkey_21][subsubkey_211]
log_scalar    ${dict_val}[key_2][subkey_21][subsubkey_212]
log_scalar    ${dict_val}[key_2][subkey_21][subsubkey_213]
</pre>
<p><em>Be aware of: No quotes are used here around the key names. In json it's different: Quotes are required.</em></p>
<p>Like in:</p>
<pre class="code literal-block">
${params}['global']['dict_val']['key_1']['subkey_11']['subsubkey_111']
</pre>
<p>Above we mentioned that in the context of the RobotFramework AIO a dictionary is a certain one: a <tt class="docutils literal">dotdict</tt>.</p>
<p>The impact is:</p>
<ol class="arabic simple">
<li>Like demonstrated in the previous robot code example, the standard syntax of accessing dictionary values is still valid.</li>
<li>Alternatively it is possible to use the reduced <tt class="docutils literal">dotdict</tt> syntax.</li>
</ol>
<p><tt class="docutils literal">dotdict</tt> syntax:</p>
<pre class="code literal-block">
log_scalar    ${dict_val.key_1.subkey_11.subsubkey_111}
log_scalar    ${dict_val.key_1.subkey_11.subsubkey_112}
log_scalar    ${dict_val.key_1.subkey_11.subsubkey_113}
log_scalar    ${dict_val.key_2.subkey_21.subsubkey_211}
log_scalar    ${dict_val.key_2.subkey_21.subsubkey_212}
log_scalar    ${dict_val.key_2.subkey_21.subsubkey_213}
</pre>
<p>Up to now we have used hard coded strings as key names. The last step in this tutorial is to use the content of variables as key names.</p>
<p>The following key name variables are defined:</p>
<pre class="code literal-block">
Set Test Variable    ${key}    key_1
Set Test Variable    ${subkey}    subkey_11
Set Test Variable    ${subsubkey}    subsubkey_111
</pre>
<p><strong>Summary</strong></p>
<p>The following ways of accessing a dictionary value are possible in robot code:</p>
<pre class="code literal-block">
log_scalar    ${dict_val}[key_1][subkey_11][subsubkey_111]
log_scalar    ${dict_val.key_1.subkey_11.subsubkey_111}
log_scalar    ${dict_val['key_1']['subkey_11']['subsubkey_111']}
log_scalar    ${dict_val}[${key}][${subkey}][${subsubkey}]
log_scalar    ${dict_val['${key}']['${subkey}']['${subsubkey}']}
</pre>
<p><strong>Last aspect</strong> (<em>that is currently under discussion</em>)</p>
<p>This is the way an integer value is defined within a json configuration file:</p>
<pre class="code literal-block">
&quot;int_val&quot; : 123,
</pre>
<p>With no quotes around <tt class="docutils literal">123</tt> (like usual).</p>
<p>And this is the way this value is accessed within this file:</p>
<pre class="code literal-block">
&quot;${new_variable}&quot; : &quot;${params}['global']['int_val']&quot;,
</pre>
<p>You may wonder why it is necessary to put quotes around <tt class="docutils literal"><span class="pre">${params}['global']['int_val']</span></tt>.</p>
<p>Let's keep the explanation simple: It is like it is and currently it is necessary.</p>
<p>Most probably in future versions of the RobotFramework AIO this will be changed.</p>
<p>By the way: The data type of <tt class="docutils literal">new_variable</tt> is <tt class="docutils literal">int</tt>.</p>
</div>
</div>
</body>
</html>
